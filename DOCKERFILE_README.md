# AI-Generated Dockerfile

This Dockerfile was generated using DSPy Chain of Thought reasoning on 2025-08-22 15:00:53 UTC.

## Generation Strategy

The Dockerfile will use a multi-stage build:
1. **Builder Stage (Node.js):** Installs Node.js and Yarn, installs frontend dependencies from package.json/yarn.lock, and builds the frontend using Vite. The build output is placed in py-src/data_formulator/dist.
2. **Builder Stage (Python):** Installs Python dependencies from requirements.txt and pyproject.toml using pip, builds the backend package if necessary, and prepares the runtime environment.
3. **Final Stage (Python Slim):** Uses python:3.11-slim as the base image, installs only required system libraries (for pyodbc, duckdb), copies the backend code and built frontend assets from the builder stages, sets up a non-root user, exposes port 5000, and adds a healthcheck for the Flask API. Secrets are not copied; they must be mounted at runtime. The entrypoint is configurable via environment variables.

Layer caching is optimized by separating dependency installation and build steps. Only necessary files are copied between stages. Build caches and temporary files are cleaned up. The image is hardened by running as a non-root user and minimizing installed packages.

## Build Instructions

```bash
# Build the image
docker build -t data-formulator .

# Run the container
docker run -p 5000:5000 data-formulator
```

## Features

- Multi-stage build for optimal image size
- Security best practices (non-root user)
- Health checks for production readiness
- Caching-optimized layer structure
- Production environment configuration

Generated by: Prism AI Workflow Orchestrator
Tool: Dockerfile Generator (Pure LLM Chain of Thought)
