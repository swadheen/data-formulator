# AI-Generated Dockerfile

This Dockerfile was generated using DSPy Chain of Thought reasoning on 2025-08-22 14:20:40 UTC.

## Generation Strategy

**High-Level Strategy:**
1. **Multi-Stage Build:**  
   - **Stage 1 (frontend):** Use `node:20-alpine` to install frontend dependencies and build static assets with Yarn. Output is the compiled frontend in `py-src/data_formulator/dist`.
   - **Stage 2 (backend/runtime):** Use `python:3.11-slim` for the final image. Install Python dependencies, copy backend code, and copy built frontend assets from the previous stage.
2. **Security:**  
   - Create and use a non-root user in the final image.
   - Limit permissions on environment files.
   - Do not include dev dependencies or build tools in the final image.
3. **Performance:**  
   - Leverage Docker layer caching by separating dependency installation from code copy.
   - Clean up caches and unnecessary files in the same layer.
   - Use `.dockerignore` to exclude node_modules, build artifacts, and docs.
4. **Configuration:**  
   - Use `EXPOSE 5000` for documentation.
   - Use `ENTRYPOINT` to run the backend server via CLI.
   - Support mounting `.env` and `api-keys.env` at runtime.
   - Add a healthcheck for the Flask server.
5. **Documentation:**  
   - Inline comments explain key decisions.
   - Labels for metadata.

## Build Instructions

```bash
# Build the image
docker build -t data-formulator .

# Run the container
docker run -p 5000:5000 data-formulator
```

## Features

- Multi-stage build for optimal image size
- Security best practices (non-root user)
- Health checks for production readiness
- Caching-optimized layer structure
- Production environment configuration

Generated by: Prism AI Workflow Orchestrator
Tool: Dockerfile Generator (Pure LLM Chain of Thought)
